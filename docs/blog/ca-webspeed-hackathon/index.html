<!DOCTYPE html>
<html lang="ja"><head>
  <!-- Basic Page Needs -->
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

  <meta name="description"
    content="This is meta description">
  
  <meta name="author" content="IWASHI">
  <meta name="generator" content="Hugo 0.84.2" />

  <!-- Mobile Specific Metas -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>CyberAgent主催「Web Speed Hackathon Online Vol.2」体験記</title>
  <link rel="icon" href="https://biwashi.github.io/blog/images/favicon.ico">

  <!-- Twitter Bootstrs CSS -->
  <link rel="stylesheet" href="https://biwashi.github.io/blog/plugins/bootstrap/bootstrap.min.css">
  <!-- Ionicons Fonts Css -->
  <link rel="stylesheet" href="https://biwashi.github.io/blog/plugins/ionicons/ionicons.min.css">

  
  <!-- Ionicons Fonts Css Version Up -->
  <script src="https://unpkg.com/ionicons@5.2.3/dist/ionicons.js"></script>
  

  <!-- animate css -->
  <link rel="stylesheet" href="https://biwashi.github.io/blog/plugins/animate-css/animate.css">
  <!-- Hero area slider css-->
  <link rel="stylesheet" href="https://biwashi.github.io/blog/plugins/slider/slider.css">
  <!-- slick slider -->
  <link rel="stylesheet" href="https://biwashi.github.io/blog/plugins/slick/slick.css">
  <!-- Fancybox -->
  <link rel="stylesheet" href="https://biwashi.github.io/blog/plugins/facncybox/jquery.fancybox.css">
  <!-- hover -->
  <link rel="stylesheet" href="https://biwashi.github.io/blog/plugins/hover/hover-min.css">
  <!-- template main css file -->
  
  <link rel="stylesheet" href="https://biwashi.github.io/blog/css/style.min.css" media="screen">

  <!-- Custom stylesheet - for your changes -->
  
  <link rel="stylesheet" href="https://biwashi.github.io/blog/css/custom.min.css" media="screen">

  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@B_Sardine">
  <meta name="twitter:creator" content="@B_Sardine">
  <meta name="twitter:title" content="MY NEW GEAR | IWASHI BLOG">
  <meta name="twitter:description" content="Iwashi no Blog">
  
  <!-- blog用にTwitterCardを設定 -->

  <meta name="twitter:image:src" content="https://biwashi.github.io/blog/images/main/iwashilong_w.jpg">

  <meta property="og:image" content="https://biwashi.github.io/blog/images/main/iwashilong_w.jpg" />
  
  
  <!-- Blogなのでカスタムされたものを表示 -->
  <meta property="og:image" content="https://biwashi.github.io/blog/images/og/ca-webspeed-hackathon.png"> 
  <meta name="twitter:image:src" content="https://biwashi.github.io/blog/images/og/ca-webspeed-hackathon.png">
  

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-PEBYWXRR3K"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-PEBYWXRR3K');
  </script>

  
  

  

  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  

  
  <meta name="google-site-verification" content="ibduUf160caf1tigM4zT1VidE_yj4hpyyixYOdX0qp0" />

  
  <!-- codeblock -->
  <link rel="stylesheet" href="https://biwashi.github.io/blog/css/syntax.css" />
  
  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet">
  
  <link href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" rel="stylesheet">

</head><body><section class="top-bar animated-header">
	<meta name="google-site-verification" content="ibduUf160caf1tigM4zT1VidE_yj4hpyyixYOdX0qp0" />
	<div class="container">
		<div class="row">
			<div class="col-lg-12">
				<nav class="navbar navbar-expand-lg navbar-light bg-light">
					<a class="navbar-brand" href="https://biwashi.github.io/blog/">
						<img src="https://biwashi.github.io/blog/images/main/iwashimiddle.png" alt="MY NEW GEAR | IWASHI BLOG">
					</a>
					<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navigation"
						aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
						<span class="navbar-toggler-icon"></span>
					</button>

					<div class="collapse navbar-collapse" id="navigation">
						<ul class="navbar-nav ml-auto">
							<li class="nav-item">
								<a class="nav-link" href="https://biwashi.github.io/blog/">Home</a>
							</li>
							
							<li class="nav-item">
								<a class="nav-link" href="https://biwashi.github.io/blog/about">About</a>
							</li>
							
							<li class="nav-item">
								<a class="nav-link" href="https://biwashi.github.io/blog/skill">Skill</a>
							</li>
							
							<li class="nav-item">
								<a class="nav-link" href="https://biwashi.github.io/blog/portfolio">Portfolio</a>
							</li>
							
							<li class="nav-item">
								<a class="nav-link" href="https://biwashi.github.io/blog/blog">Blog</a>
							</li>
							
					</div>
				</nav>
			</div>
		</div>
	</div>
</section>

<section class="global-page-header">
	<div class="container">
		<div class="row">
			<div class="col-md-12">
				<div class="block">
					<h2>CyberAgent主催「Web Speed Hackathon Online Vol.2」体験記</h2>
					<div class="portfolio-meta">
						<span>Thursday, Feb 11, 2021</span>|
						<span> Tags:
							motivation, inspiration
						</span>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>

<section class="single-post">
	<div class="container">
		
		
		
		<div class="row">
			<div class="col-md-12">
				
				<div class="post-img">
					<img class="img-fluid" alt="" src="https://biwashi.github.io/blog/images/blog/web_speed_hackathon.jpg">
				</div>
				
				<div class="post-content">
					<h1 id="はじめに">はじめに</h1>
<p>2021年2月6~7日の二日間、CyberAgent主催の「Web Speed Hackathon Online Vol.2」に参加してきました。</p>
<p>同週の平日には修論の公開期末発表会があったり、就業型インターンの仕事しまくったり、面接したりとめちゃんこ忙しかったんで死にそうになりながら参加したんですが、やっぱり僕は競争ごとが好きみたいで、とても楽しかったです。</p>
<p>元々フロントエンド何もわからんマンで、このサイトとかみたいななんちゃってフロントエンドの経験こそあるものの、ちゃんと学んだことも実践したこともなくて不安しかなかったんですが、たくさん学びを得られたイベントでした。</p>
<p>なお、本記事には技術的間違いもたくさんあると思います。本気で参考にはしないでください。ただの日記です。</p>
<p>本当に参考にする場合は、もっと強そうな人無限にいたので、その人たちのを参考にしてください…</p>
<p>（ちなみに始まる前、しにゃいさんのブログみてた）</p>
<div class="iframely-embed"><div class="iframely-responsive" style="height: 140px; padding-bottom: 0;"><a href="https://shinyaigeek.dev/log-ca-web-speed-hackathon" data-iframely-url="//cdn.iframe.ly/api/iframe?url=https%3A%2F%2Fshinyaigeek.dev%2Fpost%2Flog-ca-web-speed-hackathon&amp;key=f35ef3e07c3f9ce01b389a206da306f5&amp;iframe=card-small"></a></div></div><script async src="//cdn.iframe.ly/embed.js" charset="utf-8"></script>
<h1 id="概要">概要</h1>
<h2 id="そもそもどんなイベント">そもそもどんなイベント？</h2>
<p>運営側が用意した、架空のSNSサービスのパフォーマンスをどれだけ向上させられるかというものです。ちなみに、元のサービスはゲキ重で、最初に解禁されて立ち上げた時にめっちゃ笑いました。</p>
<p>これを決められたレギュレーションに違反しないようにチューニングしていきます。</p>
<ul>
<li>Google Chrome 最新版において、著しい機能落ちやデザイン差異を発生させてはいけない</li>
<li>採点はLighthouseをベースに計算される</li>
</ul>
<div class="iframely-embed"><div class="iframely-responsive" style="height: 140px; padding-bottom: 0;"><a href="https://github.com/GoogleChrome/lighthouse" data-iframely-url="//cdn.iframe.ly/api/iframe?url=https%3A%2F%2Fgithub.com%2FGoogleChrome%2Flighthouse&amp;key=f35ef3e07c3f9ce01b389a206da306f5"></a></div></div><script async src="//cdn.iframe.ly/embed.js" charset="utf-8"></script>
<h2 id="使われていた主な技術">使われていた主な技術</h2>
<ul>
<li>React</li>
<li>Tailwind CSS</li>
<li>Express</li>
<li>Webpack</li>
<li>SQLite</li>
<li>JSX</li>
<li>Babel</li>
</ul>
<p>このほかにも色々あったと思いますが、なんせフロントエンド初心者なので、完全に全体は把握しきれていない思います。</p>
<p>ちなみにデプロイは <code>Heroku</code>で行いました。</p>
<h1 id="やったこと">やったこと</h1>
<p>ここから、自分の記録と残っている <code>commit</code>メッセージを頼りに書いていきます。</p>
<hr>
<p>まず、最初は <a href="https://developers.google.com/speed/pagespeed/insights/?hl=ja"><strong>PageSpeed Insights</strong></a> にぶち込んでみました。</p>
<p>確かスコア0か1だったと思います。逆にめちゃすげえ…と思ってました。</p>
<p>そこからは、ここ修正しろよーーってでてくるやつを潰していきました。</p>
<h3 id="画像を色々変える">画像を色々変える</h3>
<p>まず、表示サイズに対してアホみたいに巨大な画像が使われていたので、表示されうる最大値を調べて、それ用にリサイズしました。</p>
<p>今回、よくwebサイトにあるような、画像をタップするとその画像を全画面表示して見れる、みたいな機能は実装されていなかったので、デフォの表示画面のみを考えれば大丈夫でした。</p>
<p>その後、画像フォーマットを <code>jpg</code>から<code>webp</code>に変換しました。今回はChrome最新版だけで動けばいので大丈夫です。（多分）</p>
<p><code>webp</code>というパッケージの<code>cwebp</code>というコマンドを使いました。brew で入れましょう！みたいな記事はありますが、Macにはデフォで入ってるっぽいです。</p>
<p>ただこれ、コマンドが1ファイルごとしか変換できない（っぽい）ので、シェルスクリプトを作りました。</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="k">for</span> file in *.jpg<span class="p">;</span> 
<span class="k">do</span> 
    <span class="nv">filename</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">file</span><span class="p">%.*</span><span class="si">}</span><span class="s2">&#34;</span>
    cwebp -q <span class="m">80</span> -metadata icc -sharp_yuv <span class="s2">&#34;</span><span class="nv">$file</span><span class="s2">&#34;</span> -o <span class="s2">&#34;</span><span class="nv">$filename</span><span class="s2">.webp&#34;</span><span class="p">;</span> 
<span class="k">done</span>
</code></pre></div><p>これを<code>jpg</code>がたくさんあるディレクトリ上で実行しました。</p>
<p>また、jpgでワークスペース検索をかけると、このフォーマットについて記述されている場所がほとんどなかったので、そこらへんの表記をwebpに変えていきました。（ここで、サーバサイド部分後でちゃんと読まなきゃなーを放置していた事実を忘れていたことが、最後の結果に繋がったかもしれない…）</p>
<h3 id="クソデカcssを倒す">クソデカCSSを倒す</h3>
<p>cssが確か10万行とかのレベルのクソデカでした。何じゃこりゃと思いながら見ていくと、どうやら <code>Tailwind CSS</code>とやらが原因ぽいことがわかりました。</p>
<p>そもそも<code>Tailwind CSS</code>を知らなかったため調べ、なんかめっちゃスタイルが簡単に書けるけど、全部入りはクソデカだから、使わんやつは消せよーって感じでした。</p>
<p>で、この使わんやつ消せよーをやってなかったため、クソデカになっていたようです。</p>
<p>この<code>Tailwind CSS</code>には、デフォでこの使っていない部分を消してくれる機能があるようです。</p>
<p>というわけで、<code>tailwind.config.js</code>という設定ファイルに加筆</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">purge</span><span class="o">:</span> <span class="p">[</span>
    <span class="s1">&#39;./src/index.html&#39;</span><span class="p">,</span>
    <span class="s1">&#39;./src/**/**/*.jsx&#39;</span><span class="p">,</span>
    <span class="s1">&#39;./src/**/**/*.js&#39;</span><span class="p">,</span>
    <span class="s1">&#39;./src/**/**/**/*.jsx&#39;</span><span class="p">,</span>
    <span class="s1">&#39;./src/**/**/**/*.js&#39;</span><span class="p">,</span>
    <span class="s1">&#39;./src/**/*.js&#39;</span><span class="p">,</span>
  <span class="p">],</span>
  <span class="o">~~~</span>
  <span class="o">~~~</span>
  <span class="o">~~~</span>
</code></pre></div><p>確か、この<code>purge</code>というのは、Tailwind CSSの何が使われているかを見にいく対象のファイルを指定するもので、ここで使われていないcssの記述を排除してくれる、みたいなものだった気がします。</p>
<p>これを設定したら、めちゃくちゃスッキリしました。</p>
<div class="iframely-embed"><div class="iframely-responsive" style="height: 140px; padding-bottom: 0;"><a href="https://zenn.dev/ryo_kawamata/articles/purage-tailwind" data-iframely-url="//cdn.iframe.ly/api/iframe?url=https%3A%2F%2Fzenn.dev%2Fryo_kawamata%2Farticles%2Fpurage-tailwind&amp;key=f35ef3e07c3f9ce01b389a206da306f5&amp;iframe=card-small"></a></div></div><script async src="//cdn.iframe.ly/embed.js" charset="utf-8"></script>
<h3 id="webpack最適化">webpack最適化</h3>
<p>まさに「webpack 最適化」みたいな感じでググってでてきたやつを色々試しました。</p>
<ul>
<li>source mapをなくす</li>
<li>modeをproductionにする</li>
</ul>
<h3 id="使われてないjsのライブラリを剥がす">使われてないJSのライブラリを剥がす</h3>
<p><a href="https://www.npmjs.com/package/webpack-bundle-analyzer"><strong>webpack-bundle-analyzer</strong></a>を使って、どのライブラリがデカイのか調べました。</p>
<p>まずは<code>jQuery</code>が目について、<code>$</code>関係でワークスペースを見た感じ、あんまり記述量なさそう（Ajax関係だけか？）って感じだったので、そこを <code>fetch</code>で書き直してjQueryを剥がしました。（この<code>$</code>検索でやらかしたかもしれない…）</p>
<p>次に気になったのは、<code>lodash</code>.</p>
<p>こいつは<code>_.</code>でimportして使ってたので調べてみたら、どうやらそんなに使われてない。というか、少ないなら生のJSでも書けそうか？。</p>
<p>ということで、<code>_.map</code>とかを自前で実装して剥がしました。</p>
<h3 id="gifをやめる">gifをやめる</h3>
<p>webpack-bundle-analyzerには<code>bluebird.js</code>なるものも存在して、かなりの領域を占めていました。</p>
<p>こいつ消せないかなーーっていうかどこで使ってるんだ？？ということで、<code>npm ls</code>で調べてみると、<code>gifler</code>ってやつに依存して入ってました。
これはgif画像を描画するのに使ってるっぽい感じでした。</p>
<p>ってことは、<code>gif</code>を普通の動画にして（昔、<a href="https://biwashi.github.io/Portfolio/">自己紹介用のwebスライド</a>作ってる時に、モバイル向けに動画再生させるのに詰まった記憶が蘇りながらも）、かつ<code>webm</code>に変換すればいいのでは？</p>
<p>ということで、<code>gif</code>関係の記述を削除して、<code>gifler</code>及び<code>bluebird</code>を消しました。</p>
<p>（そしてこの時、新規投稿関係のサーバー部分を修正するのをすっかり忘れていた…死）</p>
<br>
<br>
<p>以上、他にも細々したことはやりましたが、ざっとこんな感じです。</p>
<h1 id="結果">結果</h1>
<p>結果はレギュレーション違反でした。残念。</p>
<p>というか競技開始時に、「前回違反した人めちゃ多かったんで気をつけてくださいね！！」ってかなり言われたに、案の定違反してしまいました。というか自分以外にも違反者めちゃいました。</p>
<p>次もしイベントを参加する人がこれを読んでいるなら、まじで注意してください！というかめちゃハイスコアじゃなくても違反してなかったらワンチャンあります！多分！</p>
<p>とはいえ、参考順位はまさかの2位という、フロント初心者的には嬉しい感じだったんですが、ぶっちゃけ違反すればいくらでもスコア上げられるんでほんとに<strong>参考</strong>って感じですかね…。</p>
<img src="https://biwashi.github.io/blog/images/blog/iwashi-253.png" style="width:100%; text-align:center;">
<p>そして、「あーーこれは違反してるなーー」と思いながら終わったんですが、FBKでの違反ポイントが自分が想像してたところと違ったんで、恐怖でした。</p>
<p>一体いつ私は破壊してしまったのか…（ライブラリ剥がして多分ぶっ壊した）</p>
<h1 id="おわりと感想">おわりと感想</h1>
<p>初心者すぎて不安しかなかったんですが、何とか調べてるうちに色々見えるようになってきたり、Reactってこんな感じなんだーwebpackってこんな感じなんだーが体験できたので、学びが非常に多かったです。</p>
<p>また、終了後にCAの作問者の方が解説してくれたんですが、これが初心者的には目から鱗な事ばかりで非常に参考になり、初心者は特にあれを聞けるだけでも参加する価値があると思います。</p>
<p>新たなジャンルを開拓できた気がして、とてもたのしかったです。ありがとうございました！！</p>
<p>そして、このブログサイト何も考えずに作ったので、スコアめちゃ低かった…改修します…
<br>
<br></p>
<p>最後におすすめされた本、ポチろうかな。</p>
<div class="iframely-embed"><div class="iframely-responsive" style="height: 140px; padding-bottom: 0;"><a href="https://www.amazon.co.jp/dp/B07JJ344WK/" data-iframely-url="//cdn.iframe.ly/api/iframe?url=https%3A%2F%2Fwww.amazon.co.jp%2Fdp%2FB07JJ344WK%2F&amp;key=f35ef3e07c3f9ce01b389a206da306f5&amp;iframe=card-small"></a></div></div><script async src="//cdn.iframe.ly/embed.js" charset="utf-8"></script>
<br>
あと、まさかの5年ぶりぐらいに、高校の同級生の存在を観測しました。就活や開発系のイベントで高校同期に出会うのは初めてだったので少しテンション上がってました。（あっちが認知してたかどうかはわからない）
<br>

				</div>
			</div>
		</div>

		<!-- disqus script START -->
		<br>
		<br>
		<div id="disqus_thread"></div>
		<script>
			

			

			(function () { 
				var d = document, s = d.createElement('script');
				s.src = 'https://https-biwashi-github-io-blog.disqus.com/embed.js';
				s.setAttribute('data-timestamp', +new Date());
				(d.head || d.body).appendChild(s);
			})();
		</script>
		<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by
				Disqus.</a></noscript>

		<!-- disqus script END -->
	</div>
</section>





<!-- Call To Action Section Start -->
<section id="call-to-action">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <div class="block">
          <h2 class="title wow fadeInDown" data-wow-delay=".3s"
            data-wow-duration="500ms">Contact</h1>
            <p class="wow fadeInDown" data-wow-delay=".5s" data-wow-duration="500ms">
              何かご連絡がありましたらTwitterのDMでお願いします</p>
            <a href="https://twitter.com/B_Sardine" class="btn btn-default btn-contact wow fadeInDown"
              data-wow-delay=".7s" data-wow-duration="500ms">Contact with me</a>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- Call To Action Section End -->


<!-- Footer Section Start -->
<footer id="footer">
  <div class="container">
    <div class="row content-justify-between">
      <div class="col-md-8 col-12 text-center text-lg-left text-md-left">
        <p class="copyright">Copyright:
          <span>
            <script>
              document.write(new Date().getFullYear())
            </script>
          </span> Design and Developed by
          <a href="http://www.Themefisher.com" target="_blank">Themefisher</a>.
          <br> Get More Bootstrap Template From Our
          <a href="https://themefisher.com/free-bootstrap-templates/" target="_blank">Store</a>.
          <br>Home icon by
          <a href="https://icons8.com/icon/U5JRqX4RSgfj/home">Icons8</a>.
        </p>
      </div>
      <div class="col-md-4 col-12">
        <!-- Social Media -->
        <ul class="social text-center text-md-right text-lg-right">
          
          <li><a href="https://www.facebook.com/jazzy.yuzax/"><i class="ion-social-facebook"></i></a></li>
          
          <li><a href="https://github.com/BIwashi"><i class="ion-social-github"></i></a></li>
          
          <li><a href="https://twitter.com/B_Sardine"><i class="ion-social-twitter"></i></a></li>
          
          <li><a href="https://www.linkedin.com/in/shota-iwami-biwashi/"><i class="ion-social-linkedin"></i></a></li>
          
        </ul>
      </div>
    </div>
  </div>
</footer>
<!-- footer section end -->

<!-- jquery -->
<script src="https://biwashi.github.io/blog/plugins/jQurey/jquery.min.js"></script>
<!-- slick slider -->
<script src="https://biwashi.github.io/blog/plugins/slick/slick.min.js"></script>
<!-- bootstrap js -->
<script src="https://biwashi.github.io/blog/plugins/bootstrap/bootstrap.min.js"></script>
<!-- wow js -->
<script src="https://biwashi.github.io/blog/plugins/wow-js/wow.min.js"></script>
<!-- slider js -->
<script src="https://biwashi.github.io/blog/plugins/slider/slider.js"></script>
<!-- Fancybox -->
<script src="https://biwashi.github.io/blog/plugins/facncybox/jquery.fancybox.js"></script>
<!-- template main js -->

<script src="https://biwashi.github.io/blog/js/script.min.js"></script>

<!-- disqus -->
<script id="dsq-count-scr" src="//https-biwashi-github-io-blog.disqus.com/count.js" async></script>

<!-- Layout Instability API -->
<script>
  new PerformanceObserver((list) => {
    for (const entry of list.getEntries()) {
      console.log(entry);
    }}).observe({type: 'layout-shift', buffered: true});
</script>


<!-- google analitycs -->
<script>
    (function (i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r;
      i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date();
      a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
  ga('create', 'G-PEBYWXRR3K', 'auto');
  ga('send', 'pageview');
</script></body>

</html>